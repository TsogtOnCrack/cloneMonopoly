import e,{memo as t,useState as n,useRef as r,Children as o,useMemo as i,useCallback as c,useEffect as a}from"react";function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(e){a=!0,o=e}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=["responsiveProps"],y=["minWidth","maxWidth"],w=["style","onClickCapture"],g=["style"],E=["style","onTouchStart","onMouseDown","onTransitionEnd"],x=["children","show"],O=["children","show"],S=["className","style"],T=["show","activeClassName"],k=["className","onClick","style"],j=["props"];function C(t){var u=t.responsiveProps,d=void 0===u?[]:u,h=f(t,b),p=v(n(0),2),C=p[0],L=p[1],P=v(n(h.activeSlideIndex),2),W=P[0],I=P[1],M=r(null),A=r(null),N=r(null),D=r(0),X=r(!1),z=r(""),V=r(null),B=r(null),q=r(0),F=d.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minWidth,r=void 0===n?0:n,o=t.maxWidth,i=void 0===o?null:o,c=f(t,y);return C>r&&(!i||C<=i)?l(l({},e),c):e}),h),R=o.toArray(F.children),U=C?l(l({},F),{},{activeSlideIndex:Math.max(0,Math.min(F.activeSlideIndex,R.length-1)),itemsToShow:Math.min(R.length,F.itemsToShow||0),itemsToScroll:Math.min(R.length,F.itemsToScroll||1)}):h,$=U.containerProps,G=($=void 0===$?{}:$).style,H=void 0===G?{}:G,J=$.onClickCapture,K=void 0===J?null:J,Q=f($,w),Y=U.innerProps,Z=(Y=void 0===Y?{}:Y).style,_=void 0===Z?{}:Z,ee=f(Y,g),te=U.itemsListProps,ne=(te=void 0===te?{}:te).style,re=void 0===ne?{}:ne,oe=te.onTouchStart,ie=void 0===oe?null:oe,ce=te.onMouseDown,ae=void 0===ce?null:ce,ue=te.onTransitionEnd,le=void 0===ue?null:ue,de=f(te,E),se=U.backwardBtnProps,fe=(se=void 0===se?{}:se).children,ve=void 0===fe?null:fe,me=se.show,he=void 0===me||me,pe=f(se,x),be=U.forwardBtnProps,ye=(be=void 0===be?{}:be).children,we=void 0===ye?null:ye,ge=be.show,Ee=void 0===ge||ge,xe=f(be,O),Oe=U.activeSlideProps,Se=(Oe=void 0===Oe?{}:Oe).className,Te=void 0===Se?"":Se,ke=Oe.style,je=void 0===ke?{}:ke,Ce=f(Oe,S),Le=U.updateOnItemClick,Pe=void 0!==Le&&Le,We=U.activeSlideIndex,Ie=U.onRequestChange,Me=U.speed,Ae=void 0===Me?0:Me,Ne=U.delay,De=void 0===Ne?0:Ne,Xe=U.easing,ze=void 0===Xe?"linear":Xe,Ve=U.itemsToShow,Be=void 0===Ve?0:Ve,qe=U.itemsToScroll,Fe=void 0===qe?1:qe,Re=U.children,Ue=U.onAfterChange,$e=U.autoplay,Ge=void 0!==$e&&$e,He=U.autoplayDirection,Je=void 0===He?"forward":He,Ke=U.disableNavIfAllVisible,Qe=void 0===Ke||Ke,Ye=U.hideNavIfAllVisible,Ze=void 0===Ye||Ye,_e=U.centerMode,et=void 0!==_e&&_e,tt=U.infinite,nt=void 0===tt||tt,rt=U.disableNavIfEdgeVisible,ot=void 0===rt||rt,it=U.disableNavIfEdgeActive,ct=void 0===it||it,at=U.dotsNav,ut=void 0===at?{}:at,lt=U.dotsNavWrapperProps,dt=void 0===lt?{}:lt,st=ut||{},ft=st.show,vt=void 0!==ft&&ft,mt=st.activeClassName,ht=void 0===mt?"":mt,pt=f(st,T),bt=i((function(){return C?nt?m(N.current.children).slice(R.length-W,R.length-W+R.length):m(N.current.children):[]}),[W,R.length,C,nt]),yt=C?N.current.offsetWidth-A.current.offsetWidth:0,wt=function(e){var t=bt.reduce((function(t,n,r){return r>=e?t:t+(n.offsetWidth||0)}),0);return nt?t:Math.min(yt,t)},gt=i((function(){return C&&Be?bt.reduce((function(e,t,n){return n>=We&&n<We+Be||n<We&&n<We+Be-bt.length?e+t.offsetWidth:e}),0):0}),[We,Be,bt,C]),Et=o.count(Re)-1,xt=Be===R.length,Ot=Ze&&xt,St=Qe&&xt,Tt=We-W!=0,kt=C&&Tt&&nt?wt(W):0,jt=!C||!Tt&&nt?0:wt(We),Ct=C?bt[We].offsetWidth:0,Lt=C&&(et&&nt)?-(Math.min(gt||A.current.offsetWidth,A.current.offsetWidth)-Ct)/2:0,Pt=i((function(){return nt&&C?N.current.offsetWidth/3:0}),[C,nt]),Wt=W-We!=0&&N.current?"forward"===z.current.toLowerCase()&&We<W?Pt:"backward"===z.current.toLowerCase()&&We>W?-Pt:0:0,It=Tt&&(Ae||De)?"transform ".concat(Ae,"ms ").concat(ze," ").concat(De,"ms"):"none",Mt=St||!C?0:jt-kt+Lt+Wt+Pt,At=C?"translateX(-".concat(Mt,"px)"):"none",Nt=c((function(e){if("forward"===e){var t=We+Fe;return t>Et?nt?t-Et-1:We:t}if("backward"===e){var n=We-Fe;return n<0?nt?Et+1+n:We:n}return We}),[We,Fe,Et,nt]),Dt=c((function(e,t){z.current=t,N.current.style.transition=Ae||De?"transform ".concat(Ae,"ms ").concat(ze," ").concat(De,"ms"):"none",e!==We?(clearTimeout(V.current),Ie(e)):(D.current=0,X.current=!1,N.current.style.transform="translateX(-".concat(Lt+Pt+(nt?0:Mt),"px)"))}),[We,Lt,De,ze,Ae,Ie,Pt,nt,Mt]),Xt=c((function(){Ge&&(clearTimeout(V.current),V.current=setTimeout((function(){Dt(Nt(Je),Je)}),De))}),[Ge,Je,Dt,Nt,De]),zt=c((function(e){X.current&&(e.preventDefault(),e.stopPropagation(),K&&K(e))}),[K]),Vt=c((function(){Dt(Nt("backward"),"backward")}),[Dt,Nt]),Bt=c((function(e){X.current=!0;var t=e.touches&&e.touches[0]?e.touches[0].clientX:e.clientX,n=D.current-t+Lt+Pt+(nt?0:Mt),r=N.current.offsetWidth-A.current.offsetWidth,o=Math.max(Math.min(0,-n),-r);N.current.style.transition="none",N.current.style.transform="translateX(".concat(o,"px)")}),[Lt,Pt,nt,Mt]),qt=c((function(e){if(N.current.removeEventListener("mouseout",qt),N.current.removeEventListener("dragstart",qt),document.removeEventListener("mousemove",Bt),document.removeEventListener("mouseup",qt),document.removeEventListener("touchmove",Bt),document.removeEventListener("touchend",qt),X.current){var t=e.changedTouches&&e.changedTouches.length?e.changedTouches[e.changedTouches.length-1].clientX:e.clientX,n=D.current-t;n>Ct/2?Dt(Nt("forward"),"forward"):n<-Ct/2?Dt(Nt("backward"),"backward"):Dt(We,"forward")}}),[We,Ct,Dt,Nt,Bt]),Ft=c((function(e){clearTimeout(V.current),X.current||(D.current=e.clientX,document.addEventListener("mousemove",Bt),document.addEventListener("mouseup",qt),N.current.addEventListener("mouseout",qt),N.current.addEventListener("dragstart",qt)),ae&&ae(e)}),[Bt,qt]),Rt=c((function(e){clearTimeout(V.current),X.current||(D.current=e.touches[0].clientX,document.addEventListener("touchmove",Bt),document.addEventListener("touchend",qt)),ie&&ie(e)}),[Bt,qt]),Ut=c((function(e){I(We),le&&le(e)}),[We]),$t=c((function(){Dt(Nt("forward"),"forward")}),[Dt,Nt]),Gt=function(e,t,n){return e.map((function(e,r){var o=e.props,i=(o=void 0===o?{}:o).className,c=void 0===i?"":i,a=o.onClick,u=void 0===a?null:a,d=o.style,s=void 0===d?{}:d,v=f(o,k),m=f(e,j),h=nt?q.current>=R.length?"forward":"backward":r>=We?"forward":"backward",p=r+t===We,b="".concat(c," ").concat(h," ").concat(p?Te:""),y=l(l(l({},s),p?je:{}),{},{boxSizing:"border-box",margin:0}),w=!n&&Pe?function(e){var t=e.direction,n=e.index,r=e.onClick;return function(e){Dt(n,t||(We<n?"forward":"")||(We>n?"backward":"")),r&&r(e)}}({direction:h,index:r+t,onClick:u}):u,g=l(l({role:"tabpanel",className:b,style:y,onClick:w},v),p?Ce:{});return q.current+=1,l({props:g},m)}))};return a((function(){return D.current=0,X.current=!1,z.current="",We!==W?Ae||De||I(We):(Ue&&Ue(We,W),(nt||"forward"===Je&&We!==Et||"backward"===Je&&0!==We)&&Xt()),function(){clearTimeout(V.current)}}),[W,We,Ue,Ae,De,Xt,nt,Et,Je]),a((function(){return C&&Xt(),function(){clearTimeout(V.current)}}),[C]),a((function(){var e=N.current;function t(){clearTimeout(B.current),clearTimeout(V.current),B.current=setTimeout((function(){L(window.innerWidth)}),400)}return L(window.innerWidth),window.addEventListener("resize",t),function(){clearTimeout(B.current),window.removeEventListener("resize",t),document.removeEventListener("mousemove",Bt),document.removeEventListener("mouseup",qt),document.removeEventListener("touchmove",Bt),document.removeEventListener("touchend",qt),e.removeEventListener("mouseout",qt),e.removeEventListener("dragstart",qt)}}),[Bt,qt]),q.current=0,C&&(N.current.style.transform=At),e.createElement("div",s({onClickCapture:zt,style:l({display:"flex",boxSizing:"border-box",justifyContent:"center"},H)},Q,{ref:M}),he&&!Ot&&e.createElement("button",s({},pe,{type:"button",onClick:(0===Mt&&ot||0===We&&ct)&&!nt?void 0:Vt,disabled:"boolean"==typeof pe.disabled?pe.disabled:!(!(0===Mt&&ot||0===We&&ct)||nt)}),ve),e.createElement("div",s({},ee,{style:l(l({},_),{},{display:"flex",boxSizing:"border-box",flexFlow:"row wrap",padding:"0",overflow:"hidden",maxWidth:gt?"".concat(gt,"px"):"100%"}),ref:A}),e.createElement("div",s({},de,{style:l(l({},re),{},{display:"flex",boxSizing:"border-box",outline:"none",transition:It,transform:At}),"data-transform":At,onTouchStart:St?void 0:Rt,onMouseDown:St?void 0:Ft,onTransitionEnd:Ae||De?Ut:void 0,tabIndex:-1,role:"presentation",ref:N}),!St&&nt&&Gt(R.slice(W),W),Gt(R,0,St),!St&&nt&&Gt(R,0),!St&&nt&&Gt(R.slice(0,W),0))),Ee&&!Ot&&e.createElement("button",s({},xe,{type:"button",onClick:(Mt===yt&&ot||We===Et&&ct)&&!nt?void 0:$t,disabled:"boolean"==typeof xe.disabled?xe.disabled:!(!(Mt===yt&&ot||We===Et&&ct)||nt)}),we),!nt&&!!vt&&e.createElement("div",dt,Array.from({length:Math.ceil(R.length/Fe)}).map((function(t,n){return e.createElement("button",s({type:"button",key:n,title:"".concat(n)},pt,{className:"".concat(pt.className||""," ").concat(n*Fe===We?ht:""),onClick:function(){Dt(Math.min(n*Fe,R.length-1),Math.min(n*Fe,R.length-1)>We?"forward":"backward")}}))}))))}var L=t(C);export{L as default};
